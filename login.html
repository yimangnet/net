<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8">
        <title>使用者登入</title>
        <link rel="shortcut icon" href="img/sherry.ico" type="image/x-icon">
        <style>
            h1.one{display:inline}
        </style>
    </head>
<script type="text/javascript">

function WriteCookie()
{
   if( document.myform.customer.value == "" ){
      alert("請輸入名稱!");
      return;
   }

   cookievalue= escape(document.myform.customer.value) + ";";
   document.cookie="username=" + cookievalue
   alert("成功設定使用者名稱: " + cookievalue )
   history.go(0)
   
}


</script>
</head>
<body>
<form name="myform" action="">
請輸入使用者名稱(僅限英文和數字組合): <input type="text" name="customer"/>
<input type="button" value="確認" onclick="WriteCookie();"/>
</form>
<br/>
<script>
    function parseCookie() {
    var cookieObj = {};
    var cookieAry = document.cookie.split(';');
    var cookie;
    
    for (var i=0, l=cookieAry.length; i<l; ++i) {
        cookie = jQuery.trim(cookieAry[i]);
        cookie = cookie.split('=');
        cookieObj[cookie[0]] = cookie[1];
    }
    
    return cookieObj;
}


function getCookie (name)
{
	if (document.cookie.length > 0) { // if there are any cookies
		var search = name + "=";
		offset = document.cookie.indexOf(search);
		if (offset != -1) { // if cookie exists
			offset += search.length;
			// set index of beginning of value
			end = document.cookie.indexOf(";", offset);
			// set index of end of cookie value
			if (end == -1)
				end = document.cookie.length;
			return unescape(document.cookie.substring(offset, end));
		}
	}
	return null;
}

function delCookie(name) {

   var date = new Date();
   date.setTime(date.getTime() - 1000);
   document.cookie = name + "='';expires=" + date.toGMTString();
 }


function checkCookie() {
    var user = getCookie("username");
    if (user != null) {
        alert("Welcome again " + user);
    } 
}
function delCookie2(){
    var name = getCookie('username');
    delCookie(name);
    if (name==null || name==""){
        alert("使用者尚未登入!" );
    }
    else{
    
    alert("使用者 "+name+" 已成功登出 " );
    location.reload() 
    
    
    
}
}



checkCookie(); 

var username = getCookie('username');
if (username == null || username == ""){

document.write('<h3>使用者尚未登入!</h3>');
    }
else{
document.write('<h1>歡迎登入:</h2>');
document.write("<h2>");
document.write("用戶:"+ username);
document.write("</h2>");
}

</script> 
<br/>
<input type="button" value="登出(無法使用)" onclick="delCookie2();"/>
<p class='logout'></p>


</body>

<br/>



<h2><a href="index.html">回首頁</a></h2>
</body>
</html>